<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Feliz San Valent√≠n</title>

<style>
@font-face { font-family:'Agrandir'; src:url('./Agrandir-GrandHeavy.otf') format('opentype'); }
@font-face { font-family:'Garet'; src:url('./Spacetype - Garet Book.otf') format('opentype'); }

:root{
--bg:#d6283f;
--glass: rgba(255,255,255,0.18);
--border: rgba(255,255,255,0.22);
}

html, body{
height:100%;
margin:0;
overflow:hidden;
}

*{ box-sizing:border-box; }

body{
font-family:'Garet', sans-serif;
background:var(--bg);
color:white;
height:100dvh;
width:100vw;
position:relative;
padding:22px;
}

/* EMOJIS */
.hearts{
position:fixed;
inset:0;
pointer-events:none;
overflow:hidden;
z-index:1;
}
.heart{
position:absolute;
bottom:-40px;
font-size:22px;
animation:subir linear infinite;
}
@keyframes subir{
from{transform:translateY(0); opacity:0.7;}
to{transform:translateY(-120vh); opacity:0;}
}

/* HEADER */
.header{
position:fixed;
top: calc(14px + env(safe-area-inset-top));
left:0;
right:0;
text-align:center;
z-index:5;
}
.header h1{
font-family:'Agrandir', sans-serif;
margin:0;
font-size:clamp(24px,7vw,44px);
}

/* CENTER */
.center{
height:100%;
display:flex;
align-items:center;
justify-content:center;
}

/* MAIN BOX */
.caja{
width:min(700px, calc(100% - 18px));
background:var(--glass);
padding:24px;
border-radius:22px;
text-align:center;
border:1px solid var(--border);
box-shadow:
0 0 10px rgba(255,255,255,0.18),
0 0 26px rgba(255,255,255,0.12),
0 18px 60px rgba(0,0,0,0.35);
}

.texto{
font-size:clamp(18px,4.8vw,20px);
line-height:1.55;
min-height:96px;
}

/* CONTINUAR */
.caja-continuar{
position:fixed;
left:50%;
transform:translateX(-50%) translateY(10px);
width:min(700px, calc(100% - 18px));
background:var(--glass);
border:1px solid var(--border);
padding:16px 18px;
border-radius:999px;
font-size:clamp(13px,3.8vw,15px);
text-align:center;
opacity:0;
transition:0.5s;
bottom: calc(42px + env(safe-area-inset-bottom));
z-index:5;
}
.caja-continuar.mostrar{
opacity:1;
transform:translateX(-50%) translateY(0);
}

/* CONTADOR */
.contador{
position:fixed;
left:0; right:0;
bottom: calc(10px + env(safe-area-inset-bottom));
text-align:center;
font-size:12.5px;
opacity:0.9;
z-index:5;
}

/* LOCK OVERLAY */
.lock-overlay{
position:fixed;
inset:0;
z-index:999;
display:flex;
align-items:center;
justify-content:center;
padding:22px;
background: rgba(0,0,0,0.25);
backdrop-filter: blur(8px);
}

.lock-card{
width:min(420px, calc(100% - 18px));
background:var(--glass);
border:1px solid var(--border);
border-radius:22px;
padding:22px;
text-align:center;
animation: popIn 400ms ease;
}

.lock-title{
font-family:'Agrandir', sans-serif;
font-size:clamp(20px,6vw,32px);
margin-bottom:12px;
}

.lock-input{
width:80%;
padding:14px;
border-radius:14px;
border:1px solid rgba(255,255,255,0.3);
background:rgba(255,255,255,0.1);
color:white;
font-size:20px;
text-align:center;
}

.lock-btn{
margin-top:12px;
padding:12px 18px;
border:none;
border-radius:14px;
background:white;
color:black;
font-family:'Agrandir';
font-size:16px;
}

.pista-overlay{
position:fixed;
inset:0;
z-index:2000; /* üëà m√°s alto que lock */
display:flex;
align-items:center;
justify-content:center;
background: rgba(0,0,0,0.35);
backdrop-filter: blur(10px);
}

.pista-box{
background:var(--glass);
padding:22px;
border-radius:22px;
text-align:center;
border:1px solid var(--border);
font-size:18px;
max-width:320px;
}

/* ANIMACIONES */
@keyframes popIn{
from{opacity:0; transform:scale(0.95);}
to{opacity:1; transform:scale(1);}
}

.fadeOut{
animation: fadeOut 400ms forwards;
}
@keyframes fadeOut{
to{opacity:0;}
}

.hidden{opacity:0; pointer-events:none;}
.visible{opacity:1; transition:opacity 500ms ease;}
</style>
</head>

<body>

<div class="hearts">
<div class="heart" style="left:10%;animation-duration:10s;">‚ô•Ô∏è</div>
<div class="heart" style="left:30%;animation-duration:12s;">üê≠</div>
<div class="heart" style="left:60%;animation-duration:11s;">‚ù§Ô∏è‚Äçü©π</div>
<div class="heart" style="left:80%;animation-duration:13s;">‚ù§Ô∏è‚Äçüî•</div>
</div>

<!-- LOCK -->
<div class="lock-overlay" id="lockOverlay">
<div class="lock-card">
<div class="lock-title">Contrase√±a</div>
<input id="passInput" class="lock-input" type="password" maxlength="4" inputmode="numeric">
<br>
<button class="lock-btn" onclick="checkPass()">Entrar</button>
</div>
</div>

<!-- PISTA POPUP -->
<div class="pista-overlay hidden" id="pistaOverlay" onclick="cerrarPista()">
<div class="pista-box" id="pistaText"></div>
</div>

<!-- MAIN CONTENT -->
<div id="mainContent" class="hidden">

<div class="header">
<h1>¬°Feliz San Valent√≠n!</h1>
</div>

<div class="center">
<div class="caja">
<p class="texto" id="textoEscribiendo"></p>
</div>
</div>

<div class="caja-continuar" id="continuarBox">
‚ù§Ô∏è‚Äçüî• Para continuar con la sorpresa, abre la CAJA 1 y lee la siguiente etiqueta NFC
</div>

<div class="contador" id="contador"></div>

</div>

<script>
const pistas = [
"Son 4 n√∫meros ü§î",
"Es una fecha importante ‚ù§Ô∏è‚Äçüî•",
"Empieza por: 08.. üí£",
"0803 üôà"
];

let intento = 0;

function vibrar(ms){
if(navigator.vibrate) navigator.vibrate(ms);
}

function checkPass(){
const val = document.getElementById("passInput").value;

if(val === "0803"){
unlock();
}else{
mostrarPista();
}
}

function mostrarPista(){
const overlay = document.getElementById("pistaOverlay");
const text = document.getElementById("pistaText");

text.innerHTML = pistas[Math.min(intento, pistas.length-1)];
overlay.classList.remove("hidden");

intento++;
vibrar(30);
}

function cerrarPista(){
document.getElementById("pistaOverlay").classList.add("hidden");
}

function unlock(){
vibrar(50);

document.getElementById("lockOverlay").classList.add("fadeOut");

setTimeout(()=>{
document.getElementById("lockOverlay").style.display="none";
document.getElementById("mainContent").classList.remove("hidden");
document.getElementById("mainContent").classList.add("visible");
startMain();
},400);
}

/* MAIN */
function startMain(){

const mensaje="Eres la casualidad m√°s bonita que lleg√≥ a mi vida ‚ù§Ô∏è";
let i=0;

function escribir(){
if(i<mensaje.length){
document.getElementById("textoEscribiendo").innerHTML+=mensaje[i];
i++;
setTimeout(escribir,40);
}else{
setTimeout(()=>{
document.getElementById("continuarBox").classList.add("mostrar");
},3000);
}
}
escribir();

const fechaInicio=new Date(2025,2,8);

function actualizar(){
const ahora=new Date();
const diff=ahora-fechaInicio;

const dias=Math.floor(diff/(1000*60*60*24));
const horas=Math.floor((diff/(1000*60*60))%24);
const minutos=Math.floor((diff/(1000*60))%60);

document.getElementById("contador").innerHTML=
"‚ô•Ô∏è Llevamos juntas: "+dias+" d√≠as ¬∑ "+horas+" h ¬∑ "+minutos+" min";
}

setInterval(actualizar,60000);
actualizar();

}
</script>

</body>
</html>

