<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Feliz San Valent√≠n</title>

<style>
@font-face { font-family:'Agrandir'; src:url('./Agrandir-GrandHeavy.otf') format('opentype'); }
@font-face { font-family:'Garet'; src:url('./Spacetype - Garet Book.otf') format('opentype'); }

:root{
  --bg:#d6283f;
  --glass: rgba(255,255,255,0.18);
  --border: rgba(255,255,255,0.22);
}

html, body{
  height:100%;
  margin:0;
  overflow:hidden;
}

*{ box-sizing:border-box; }

body{
  font-family:'Garet', sans-serif;
  background:var(--bg);
  color:white;

  height:100dvh;
  width:100vw;

  position:relative;
  padding:22px;
}

/* EMOJIS FLOTANDO */
.hearts{
  position:fixed;
  inset:0;
  pointer-events:none;
  overflow:hidden;
  z-index:1;
}
.heart{
  position:absolute;
  bottom:-40px;
  font-size:22px;
  animation:subir linear infinite;
}
@keyframes subir{
  from{transform:translateY(0); opacity:0.7;}
  to{transform:translateY(-120vh); opacity:0;}
}

/* CABECERA ARRIBA (FUERA) */
.header{
  position:fixed;
  top: calc(14px + env(safe-area-inset-top));
  left:0;
  right:0;
  text-align:center;
  padding:0 14px;
  z-index:5;
}
.header h1{
  font-family:'Agrandir', sans-serif;
  margin:0;
  color:white;
  font-size:clamp(24px, 7vw, 44px);
  line-height:1.05;
  text-shadow: 0 10px 30px rgba(0,0,0,0.25);
}

/* CONTENEDOR CENTRAL */
.center{
  height:100%;
  display:flex;
  align-items:center;
  justify-content:center;
}

/* CUADRO PRINCIPAL */
.caja{
  width:min(700px, calc(100% - 18px));
  background:var(--glass);
  padding:24px;
  border-radius:22px;
  text-align:center;

  border:1px solid var(--border);

  box-shadow:
    0 0 10px rgba(255,255,255,0.18),
    0 0 26px rgba(255,255,255,0.12),
    0 18px 60px rgba(0,0,0,0.35);
}

/* TEXTO */
.texto{
  font-size:clamp(18px, 4.8vw, 20px);
  line-height:1.55;
  margin:0;
  min-height:96px;
}

/* CUADRO CONTINUAR */
.caja-continuar{
  position:fixed;
  left:50%;
  transform:translateX(-50%) translateY(10px);
  width:min(700px, calc(100% - 18px));
  background:var(--glass);
  border:1px solid var(--border);

  padding:16px 18px;
  border-radius:999px;

  font-size:clamp(13px, 3.8vw, 15px);
  line-height:1.35;
  text-align:center;

  display:flex;
  align-items:center;
  justify-content:center;

  opacity:0;
  transition:opacity 0.5s ease, transform 0.5s ease;

  box-shadow:
    0 0 8px rgba(255,255,255,0.20),
    0 0 22px rgba(255,255,255,0.14);

  bottom: calc(42px + env(safe-area-inset-bottom));
  z-index:5;
}
.caja-continuar.mostrar{
  opacity:1;
  transform:translateX(-50%) translateY(0);
  animation: latido 900ms ease, brilloSuave 4s ease-in-out infinite;
}

/* CONTADOR */
.contador{
  position:fixed;
  left:0; right:0;
  bottom: calc(10px + env(safe-area-inset-bottom));
  text-align:center;
  font-size:12.5px;
  opacity:0.9;
  padding:0 14px;
  line-height:1.2;
  z-index:5;
}

/* ANIMACIONES */
@keyframes latido{
  0%{transform:translateX(-50%) scale(1);}
  40%{transform:translateX(-50%) scale(1.03);}
  100%{transform:translateX(-50%) scale(1);}
}
@keyframes brilloSuave{
  0%{ box-shadow:0 0 6px rgba(255,255,255,0.15), 0 0 16px rgba(255,255,255,0.10); }
  50%{ box-shadow:0 0 14px rgba(255,255,255,0.32), 0 0 28px rgba(255,255,255,0.20); }
  100%{ box-shadow:0 0 6px rgba(255,255,255,0.15), 0 0 16px rgba(255,255,255,0.10); }
}

/* --- PANTALLA CONTRASE√ëA --- */
.lock-overlay{
  position:fixed;
  inset:0;
  z-index:999;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:22px;
  background: rgba(0,0,0,0.18);
  backdrop-filter: blur(6px);
}

.lock-card{
  width:min(520px, calc(100% - 18px));
  background:var(--glass);
  border:1px solid var(--border);
  border-radius:22px;
  padding:22px;
  text-align:center;

  box-shadow:
    0 0 10px rgba(255,255,255,0.18),
    0 0 26px rgba(255,255,255,0.12),
    0 18px 60px rgba(0,0,0,0.45);

  animation: popIn 420ms ease;
}

.lock-title{
  font-family:'Agrandir', sans-serif;
  font-size:clamp(20px, 6vw, 32px);
  margin:0 0 8px;
}

.lock-sub{
  margin:0 0 14px;
  opacity:0.9;
  font-size:15px;
  line-height:1.4;
}

.lock-input{
  width: min(260px, 80%);
  padding:14px 16px;
  border-radius:14px;
  border:1px solid rgba(255,255,255,0.28);
  background: rgba(255,255,255,0.10);
  color:white;
  font-size:20px;
  text-align:center;
  outline:none;
}

.lock-input::placeholder{ color: rgba(255,255,255,0.75); }

.lock-btn{
  margin-top:12px;
  padding:12px 16px;
  border-radius:14px;
  border:none;
  background:white;
  color:#111;
  font-family:'Agrandir', sans-serif;
  font-size:16px;
  cursor:pointer;
}

.lock-msg{
  margin-top:12px;
  font-size:14px;
  line-height:1.35;
  opacity:0.95;
  min-height:40px;
}

/* Animaci√≥n error */
.shake{
  animation: shake 360ms ease;
}
@keyframes shake{
  0%{transform:translateX(0);}
  20%{transform:translateX(-8px);}
  40%{transform:translateX(8px);}
  60%{transform:translateX(-6px);}
  80%{transform:translateX(6px);}
  100%{transform:translateX(0);}
}

@keyframes popIn{
  from{opacity:0; transform:translateY(12px) scale(0.98);}
  to{opacity:1; transform:translateY(0) scale(1);}
}

.fadeOut{
  animation: fadeOut 360ms ease forwards;
}
@keyframes fadeOut{
  from{opacity:1;}
  to{opacity:0;}
}

/* Al principio ocultamos el resto hasta que acierte */
.hidden{
  opacity:0;
  pointer-events:none;
}
.visible{
  opacity:1;
  pointer-events:auto;
  transition:opacity 300ms ease;
}
</style>
</head>

<body>

<div class="hearts">
  <div class="heart" style="left:10%;animation-duration:10s;">‚ô•Ô∏è</div>
  <div class="heart" style="left:30%;animation-duration:12s;">üê≠</div>
  <div class="heart" style="left:60%;animation-duration:11s;">‚ù§Ô∏è‚Äçü©π</div>
  <div class="heart" style="left:80%;animation-duration:13s;">‚ù§Ô∏è‚Äçüî•</div>
</div>

<!-- OVERLAY CONTRASE√ëA -->
<div class="lock-overlay" id="lockOverlay">
  <div class="lock-card" id="lockCard">
    <h2 class="lock-title">üîê Contrase√±a de amor</h2>
    <p class="lock-sub">Vale‚Ä¶ antes de entrar‚Ä¶ dime el c√≥digo secreto üòå</p>

    <input
      class="lock-input"
      id="passInput"
      type="password"
      inputmode="numeric"
      maxlength="4"
      placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
      autocomplete="off"
    />

    <br>
    <button class="lock-btn" id="btnEnter">Entrar üíò</button>

    <div class="lock-msg" id="lockMsg"></div>
  </div>
</div>

<!-- TODO EL CONTENIDO (OCULTO HASTA ACERTAR) -->
<div id="mainContent" class="hidden">

  <div class="header">
    <h1>¬°Feliz San Valent√≠n!</h1>
  </div>

  <div class="center">
    <div class="caja">
      <p class="texto" id="textoEscribiendo"></p>
    </div>
  </div>

  <div class="caja-continuar" id="continuarBox">
    ‚ù§Ô∏è‚Äçüî• Para continuar con la sorpresa, abre la CAJA 1 y lee la siguiente etiqueta NFC
  </div>

  <div class="contador" id="contador"></div>

</div>

<script>
function vibrar(ms){
  try{ if(navigator.vibrate) navigator.vibrate(ms); }catch(e){}
}

const PASSWORD = "0803";
let intentos = 0;

const pistas = [
  "üëÄ Pista 1: son 4 n√∫meros.",
  "üìÖ Pista 2: te suena‚Ä¶ es una fecha importante.",
  "üíñ Pista 3: empieza por 08‚Ä¶",
  "üòè Pista 4: 0803 (te lo mereces por insistir üòÇ)"
];

const bromas = [
  "Noooo üò≠ ese no es‚Ä¶ pero me encanta tu seguridad.",
  "Casi‚Ä¶ (bueno, no) üòå prueba otra vez, amor.",
  "Ese c√≥digo no abre esto‚Ä¶ ¬°abre mi coraz√≥n! (pero tampoco era üò≠)",
  "Error 404: c√≥digo correcto no encontrado üíÖ"
];

const lockOverlay = document.getElementById("lockOverlay");
const lockCard = document.getElementById("lockCard");
const passInput = document.getElementById("passInput");
const btnEnter = document.getElementById("btnEnter");
const lockMsg = document.getElementById("lockMsg");

const mainContent = document.getElementById("mainContent");

function mostrarMensajeError(){
  const broma = bromas[intentos % bromas.length];
  const pista = pistas[Math.min(intentos, pistas.length-1)];
  lockMsg.innerHTML = "‚ùå " + broma + "<br>" + pista;

  lockCard.classList.remove("shake");
  void lockCard.offsetWidth; // reinicia animaci√≥n
  lockCard.classList.add("shake");

  vibrar(30);
}

function desbloquear(){
  // Mostrar contenido
  mainContent.classList.remove("hidden");
  mainContent.classList.add("visible");

  // Cerrar overlay con animaci√≥n
  lockOverlay.classList.add("fadeOut");
  setTimeout(()=>{
    lockOverlay.style.display = "none";
  }, 360);

  vibrar(40);

  // Arrancar lo dem√°s
  iniciarTextoYContador();
}

function comprobar(){
  const val = passInput.value.trim();
  if(val === PASSWORD){
    lockMsg.innerHTML = "‚úÖ Perfecto üòç";
    desbloquear();
  } else {
    intentos++;
    mostrarMensajeError();
    passInput.value = "";
    passInput.focus();
  }
}

btnEnter.addEventListener("click", comprobar);
passInput.addEventListener("keydown", (e)=>{
  if(e.key === "Enter") comprobar();
});

// foco autom√°tico
setTimeout(()=>passInput.focus(), 200);

/* --- LO DE ANTES --- */
function iniciarTextoYContador(){
  const mensaje="Eres la casualidad m√°s bonita que lleg√≥ a mi vida ‚ù§Ô∏è";
  let i=0;

  function escribir(){
    if(i<mensaje.length){
      document.getElementById("textoEscribiendo").innerHTML += mensaje.charAt(i);
      i++;
      setTimeout(escribir, 40);
    } else {
      setTimeout(()=>{
        document.getElementById("continuarBox").classList.add("mostrar");
        vibrar(25);
      }, 3000);
    }
  }
  escribir();

  // Contador
  const fechaInicio=new Date(2025,2,8);

  function actualizarContador(){
    const ahora=new Date();
    const diferencia=ahora-fechaInicio;

    const dias=Math.floor(diferencia/(1000*60*60*24));
    const horas=Math.floor((diferencia/(1000*60*60))%24);
    const minutos=Math.floor((diferencia/(1000*60))%60);

    document.getElementById("contador").innerHTML =
      "‚ô•Ô∏è Llevamos juntas: "+dias+" d√≠as ¬∑ "+horas+" h ¬∑ "+minutos+" min";
  }

  setInterval(actualizarContador, 60000);
  actualizarContador();
}
</script>

</body>
</html>
